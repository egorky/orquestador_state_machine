{
    "execution_sequences": [
        {
            "parameter": "id_number",
            "steps": [
                {
                    "tool": "ai_extract",
                    "prompt": "Extract the ID number from the user's response. Return as {'id_number': <number>}."
                },
                {
                    "tool": "validate",
                    "validation": "id_number"
                }
            ]
        },
        {
            "parameter": "city",
            "steps": [
                {
                    "tool": "api_call",
                    "api": "fetch_cities_api",
                    "output_key": "cities"
                },
                {
                    "tool": "ai_extract",
                    "prompt": "Extract the city name from the user's response and match it to one of the provided cities. Return as {'city_id': <id>, 'city_name': <name>}."
                },
                {
                    "tool": "validate",
                    "validation": "city"
                }
            ]
        },
        {
            "parameter": "branch",
            "steps": [
                {
                    "tool": "api_call",
                    "api": "fetch_branches_api",
                    "input_key": "city_id",
                    "output_key": "branches"
                },
                {
                    "tool": "ai_extract",
                    "prompt": "Extract the branch name from the user's response and match it to one of the provided branches. Return as {'branch_id': <id>, 'branch_name': <name>}."
                },
                {
                    "tool": "validate",
                    "validation": "branch"
                }
            ]
        },
        {
            "parameter": "date_time",
            "steps": [
                {
                    "tool": "api_call",
                    "api": "fetch_available_times_api",
                    "input_key": "branch_id",
                    "output_key": "available_times"
                },
                {
                    "tool": "ai_extract",
                    "prompt": "Extract the date and time from the user's response and match it to one of the provided times. Return as {'date_time': <time>}."
                },
                {
                    "tool": "validate",
                    "validation": "date_time"
                }
            ]
        },
        {
            "parameter": "final_action",
            "steps": [
                {
                    "tool": "api_call",
                    "api": "create_appointment_api",
                    "input_keys": ["id_number", "city_id", "branch_id", "date_time"]
                }
            ]
        }
    ]
}