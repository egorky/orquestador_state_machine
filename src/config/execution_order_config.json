{
    "execution_sequences": [
        {
            "parameter": "id_number",
            "steps": [
                {
                    "tool": "ai_extract",
                    "prompt": "Extrae el número de identificación de la respuesta del usuario. Devuelve un JSON con la clave 'id_number'."
                },
                {
                    "tool": "validate",
                    "validation": "id_number"
                }
            ]
        },
        {
            "parameter": "city",
            "steps": [
                {
                    "tool": "api_call",
                    "api": "fetch_cities_api",
                    "output_key": "cities"
                },
                {
                    "tool": "ai_extract",
                    "prompt": "Extrae el nombre de la ciudad de la respuesta del usuario y compáralo con una de las ciudades proporcionadas. Devuelve un JSON con las claves 'city_id' y 'city_name'."
                },
                {
                    "tool": "validate",
                    "validation": "city"
                }
            ]
        },
        {
            "parameter": "branch",
            "steps": [
                {
                    "tool": "api_call",
                    "api": "fetch_branches_api",
                    "input_keys": ["city_id"],
                    "output_key": "branches"
                },
                {
                    "tool": "ai_extract",
                    "prompt": "Extrae el nombre de la sucursal de la respuesta del usuario y compáralo con una de las sucursales proporcionadas. Devuelve un JSON con las claves 'branch_id' y 'branch_name'."
                },
                {
                    "tool": "validate",
                    "validation": "branch"
                }
            ]
        },
        {
            "parameter": "speciality",
            "steps": [
                {
                    "tool": "api_call",
                    "api": "fetch_specialities_api",
                    "input_keys": ["branch_id"],
                    "output_key": "specialities"
                },
                {
                    "tool": "ai_extract",
                    "prompt": "Extrae el nombre de la especialidad de la respuesta del usuario y compáralo con una de las especialidades proporcionadas. Devuelve un JSON con las claves 'speciality_id' y 'speciality_name'."
                },
                {
                    "tool": "validate",
                    "validation": "speciality"
                }
            ]
        },
        {
            "parameter": "date_time",
            "steps": [
                {
                    "tool": "api_call",
                    "api": "fetch_available_times_api",
                    "input_keys": ["speciality_id"],
                    "output_key": "available_times"
                },
                {
                    "tool": "ai_extract",
                    "prompt": "Extrae la fecha y hora de la respuesta del usuario y compárala con una de las opciones proporcionadas. Devuelve un JSON con la clave 'date_time'."
                },
                {
                    "tool": "validate",
                    "validation": "date_time"
                }
            ]
        },
        {
            "parameter": "final_action",
            "steps": [
                {
                    "tool": "api_call",
                    "api": "create_appointment_api",
                    "input_keys": ["id_number", "city_id", "branch_id", "speciality_id", "date_time"]
                }
            ]
        }
    ]
}